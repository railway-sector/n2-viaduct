"use strict";(self.webpackChunkn2_viaduct=self.webpackChunkn2_viaduct||[]).push([[74088],{74088:(t,e,i)=>{i.d(e,{previewSymbol2D:()=>E});var l=i(89379),o=i(69539),n=i(59784),a=i(50076),s=i(85504),d=i(76931),u=i(76279),c=i(87840),h=i(65709),r=i(26291),v=i(27790);const p="picture-fill",m="picture-marker",g="simple-fill",f="simple-line",y="simple-marker",w="text",x="Aa",b=h.CB.size,z=h.CB.maxSize,L=h.CB.maxOutlineSize,M=h.CB.lineWidth,S=225,k=document.createElement("canvas");function C(t,e,i){if("polygon"===t.type){const l=t.extent,o=0===l.width?1:l.width,n=0===l.height?1:l.height;t=(0,u.wp)({originPosition:"upperLeft",scale:[o/e,n/i],translate:[l.xmin,l.ymax]},{},t);let a="";for(let e=0;e<t.rings.length;e++){const i=t.rings[e];for(let t=0;t<i.length;t++){const e=i[t][0],l=i[t][1];let o="";0===t?(o="M".concat(e.toString()," ").concat(l.toString()),""!==a&&(o=" ".concat(o)),a+=o):t===i.length-1?(o="l".concat(e.toString()," ").concat(l.toString()," Z"),""!==a&&(o=" ".concat(o)),a+=o):(o="l".concat(e.toString()," ").concat(l.toString()),""!==a&&(o=" ".concat(o)),a+=o)}}return a}if("polyline"===t.type){const l=t.extent,o=0===l.width?1:l.width,n=0===l.height?1:l.height;t=(0,u.QE)({originPosition:"upperLeft",scale:[o/e,n/i],translate:[l.xmin,l.ymax]},{},t);let a="";for(let e=0;e<t.paths.length;e++){const i=t.paths[e];for(let t=0;t<i.length;t++){const e=i[t][0],l=i[t][1];let o="";0===t?(o="M".concat(e.toString()," ").concat(l.toString()),""!==a&&(o=" ".concat(o)),a+=o):(o="l".concat(e.toString()," ").concat(l.toString()),""!==a&&(o=" ".concat(o)),a+=o)}}return a}return""}function A(t,e){const i=k.getContext("2d"),l=[];e&&(e.weight&&l.push(e.weight),e.size&&l.push(e.size+"px"),e.family&&l.push(e.family)),i.font=l.join(" ");const{width:o,actualBoundingBoxLeft:n,actualBoundingBoxRight:a,actualBoundingBoxAscent:s,actualBoundingBoxDescent:d}=i.measureText(t);return{width:Math.ceil(Math.max(o,n+a)),height:Math.ceil(s+d),x:Math.floor(n),y:Math.floor((s-d)/2)}}function B(t){const e=null===t||void 0===t?void 0:t.size;return{width:null!=e&&"object"==typeof e&&"width"in e?(0,d.Lz)(e.width):null,height:null!=e&&"object"==typeof e&&"height"in e?(0,d.Lz)(e.height):null}}function P(t,e){return t>e?"dark":"light"}async function E(t,e){var i;const{shapeDescriptor:o,size:n,renderOptions:u,outputSize:S}=function(t,e){var i,o;const n="number"==typeof(null===e||void 0===e?void 0:e.size)?null===e||void 0===e?void 0:e.size:null,a=null!=n?(0,d.Lz)(n):null,s=null!=(null===e||void 0===e?void 0:e.maxSize)?(0,d.Lz)(e.maxSize):null;let u="angle"in t?t.angle:null;null!=(null===e||void 0===e?void 0:e.rotation)&&(u=(null!==u&&void 0!==u?u:0)+e.rotation);const r=(0,c.eH)(t);let v=(0,c.$4)(t);"dark"!==j(t,245)||(null===e||void 0===e?void 0:e.ignoreWhiteSymbols)||(v=(0,l.A)((0,l.A)({width:.75},v),{},{color:"#bdc3c7"}));let S=null;const k={shape:null,fill:r,stroke:v,offset:[0,0]};(null===(i=v)||void 0===i?void 0:i.width)&&(v.width=Math.min(v.width,L));const P=(null===(o=v)||void 0===o?void 0:o.width)||0;let E=null!=(null===e||void 0===e?void 0:e.size)&&(null==(null===e||void 0===e?void 0:e.scale)||(null===e||void 0===e?void 0:e.scale)),D=0,F=0,Z=!1;switch(t.type){case y:{const i=t.style,{width:l,height:o}=B(e);let n=l===o&&null!=l?l:null!=a?a:Math.min((0,d.Lz)(t.size),s||z);if(!0===(null===e||void 0===e?void 0:e.useMarkerSymbolSize)&&null!==l&&null!==o){const e=Math.min((0,d.Lz)(t.size),s||z);n=e>l&&e>o?Math.min(l,o):e}switch(D=n,F=n,i){case"circle":k.shape={type:"circle",cx:0,cy:0,r:.5*n},E||(D+=P,F+=P);break;case"cross":k.shape={type:"path",path:[{command:"M",values:[0,.5*F]},{command:"L",values:[D,.5*F]},{command:"M",values:[.5*D,0]},{command:"L",values:[.5*D,F]}]};break;case"diamond":k.shape={type:"path",path:[{command:"M",values:[0,.5*F]},{command:"L",values:[.5*D,0]},{command:"L",values:[D,.5*F]},{command:"L",values:[.5*D,F]},{command:"Z",values:[]}]},E||(D+=P,F+=P);break;case"square":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]},E||(D+=P,F+=P),u&&(Z=!0);break;case"triangle":k.shape={type:"path",path:[{command:"M",values:[.5*D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]},E||(D+=P,F+=P),u&&(Z=!0);break;case"x":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,F]},{command:"M",values:[D,0]},{command:"L",values:[0,F]}]},u&&(Z=!0);break;case"path":k.shape={type:"path",path:t.path||""},E||(D+=P,F+=P),u&&(Z=!0),E=!0}break}case f:{var O,W,q;const{width:t,height:i}=B(e),l=(0,c.O0)(v).reduce((t,e)=>t+e,0),o=l&&Math.ceil(M/l),n=null!==(O=null!==i&&void 0!==i?i:a)&&void 0!==O?O:P,s=null!==t&&void 0!==t?t:l*o||M;if(E=!0,"polyline"===(null===e||void 0===e||null===(W=e.geometry)||void 0===W?void 0:W.type)&&null!==e&&void 0!==e&&null!==(q=e.geometry)&&void 0!==q&&q.extent){var H;D=s,F=null!==i&&void 0!==i?i:D;const t=1e3,l=.15*t;S=[D,F],F=S[0]>S[1]?t*S[1]/S[0]:t,D=S[0]>S[1]?t:t*S[0]/S[1],null!==(H=v)&&void 0!==H&&H.width&&(v.width=v.width*t/(S[1]>S[0]?S[1]:S[0]),v.width>l&&(v.width=l)),k.shape={type:"path",path:C(e.geometry,D,F)}}else D=null!=(null===e||void 0===e?void 0:e.maxSize)?Math.min(s,e.maxSize):s,F=n,v&&(v.width=n),k.shape={type:"path",path:[{command:"M",values:[n/2,F/2]},{command:"L",values:[D-n/2,F/2]}]};break}case p:case g:{var Q,T,N;const t="object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&!(null===e||void 0===e||null===(Q=e.symbolConfig)||void 0===Q||!Q.isSquareFill),{width:i,height:l}=B(e);D=!t&&i!==l||null==i?null!=a?a:b:i,F=!t&&i!==l||null==l?D:l,E||(D+=P,F+=P),E=!0,null!==e&&void 0!==e&&null!==(T=e.geometry)&&void 0!==T&&T.extent&&"polygon"===(null===e||void 0===e||null===(N=e.geometry)||void 0===N?void 0:N.type)?(S=[D,F],F=S[0]>S[1]?1e3*S[1]/S[0]:1e3,D=S[0]>S[1]?1e3:1e3*S[0]/S[1],k.shape={type:"path",path:C(e.geometry,D,F)}):k.shape=t?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:h.nq.fill[0];break}case m:{const i=Math.min((0,d.Lz)(t.width),s||z),l=Math.min((0,d.Lz)(t.height),s||z),{width:o,height:n}=B(e),c=o===n&&null!=o?o:null!=a?a:Math.max(i,l),h=t.width/t.height;D=h<=1?Math.ceil(c*h):c,F=h<=1?c:Math.ceil(c/h),k.shape={type:"image",x:-Math.round(D/2),y:-Math.round(F/2),width:D,height:F,src:t.url||""},u&&(Z=!0);break}case w:{const i=t,l=(null===e||void 0===e?void 0:e.overrideText)||i.text||x,o=i.font,{width:n,height:u}=B(e),c=null!=u?u:null!=a?a:Math.min((0,d.Lz)(o.size),s||z),{width:h,height:r}=A(l,{weight:o.weight,size:c,family:o.family}),v=/[\uE600-\uE6FF]/.test(l);D=null!==n&&void 0!==n?n:v?c:h,F=v?c:r;let p=.5*(v?c:r);v&&(p+=5),k.shape={type:"text",text:l,x:i.xoffset||0,y:i.yoffset||p,align:"middle",alignBaseline:i.verticalAlignment,decoration:o&&o.decoration,rotated:i.rotated,kerning:i.kerning},k.font=o&&{size:c,style:o.style,decoration:o.decoration,weight:o.weight,family:o.family};break}}return{shapeDescriptor:k,size:[D,F],outputSize:S,renderOptions:{node:null===e||void 0===e?void 0:e.node,scale:E,opacity:null===e||void 0===e?void 0:e.opacity,rotations:[u],useRotationSize:Z,effectView:null===e||void 0===e?void 0:e.effectView,ariaLabel:null===e||void 0===e?void 0:e.ariaLabel,clipBloomEffect:null===e||void 0===e?void 0:e.clipBloomEffect}}}(t,e);if(!o.shape)throw new a.A("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(t,e){const i=e.fill,l=t.color;if("pattern"===(null===i||void 0===i?void 0:i.type)&&l&&t.type!==p){const t=await(0,c.rc)(i.src,l.toCss(!0));i.src=t,e.fill=i}}(t,o),await async function(t,e,i,l){if(!("font"in t)||!t.font||"text"!==e.shape.type)return;try{await(0,s.Al)(t.font)}catch(c){}const{width:o,height:n}=B(l);if(!/[\uE600-\uE6FF]/.test(e.shape.text)){var a,d,u;const{width:s,height:c,x:h,y:r}=A(e.shape.text,{weight:null===(a=e.font)||void 0===a?void 0:a.weight,size:null===(d=e.font)||void 0===d?void 0:d.size,family:null===(u=e.font)||void 0===u?void 0:u.family});i[0]=null!==o&&void 0!==o?o:s,i[1]=null!==n&&void 0!==n?n:c,e.shape.x=h,e.shape.y=r;let v="angle"in t?t.angle:null;if(null!=(null===l||void 0===l?void 0:l.rotation)&&(v=(null!==v&&void 0!==v?v:0)+l.rotation),v){const t=v*(Math.PI/180),e=Math.abs(Math.sin(t)),l=Math.abs(Math.cos(t));i[1]=i[0]*e+i[1]*l}}}(t,o,n,e);const k=[[o]];if("object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&null!==e&&void 0!==e&&null!==(i=e.symbolConfig)&&void 0!==i&&i.applyColorModulation){const t=.6*n[0];k.unshift([(0,l.A)((0,l.A)({},o),{},{offset:[-t,0],fill:(0,h.QC)(o.fill,-.3)})]),k.push([(0,l.A)((0,l.A)({},o),{},{offset:[t,0],fill:(0,h.QC)(o.fill,.3)})]),n[0]+=2*t,u.scale=!1}"text"===t.type&&function(t,e,i,o,n){var a;if(null!=t.haloColor&&null!=t.haloSize){var s;null!==(s=n.masking)&&void 0!==s||(n.masking=i.map(()=>[]));const a=(0,d.Lz)(t.haloSize);o[0]+=a,o[1]+=a,i.unshift([(0,l.A)((0,l.A)({},e),{},{fill:null,stroke:{color:t.haloColor,width:2*a,join:"round",cap:"round"}})]),n.masking.unshift([{shape:{type:"rect",x:0,y:0,width:o[0]+2*v.y7,height:o[1]+2*v.y7},fill:[255,255,255],stroke:null},(0,l.A)((0,l.A)({},e),{},{fill:[0,0,0,0],stroke:null})])}null==t.backgroundColor&&null==t.borderLineColor||(o[0]+=2*v.y7,o[1]+=2*v.y7,i.unshift([{shape:{type:"rect",x:0,y:0,width:o[0],height:o[1]},fill:t.backgroundColor,stroke:{color:t.borderLineColor,width:(0,d.Lz)(t.borderLineSize)}}]),null===(a=n.masking)||void 0===a||a.unshift([]))}(t,o,k,n,u);const P=(0,r.fz)(k,n,u);if(S&&P){var E,D,F,Z;const t="img"===P.nodeName.toLowerCase()?P:P.firstChild;"svg"===t.nodeName.toLowerCase()&&t.setAttribute("viewBox","0 0 ".concat(n[0].toString()," ").concat(n[1].toString())),t.setAttribute("width",S[0].toString()),t.setAttribute("height",S[1].toString()),S.length>2&&(t.style.setProperty("padding-left",(null===(E=S[2])||void 0===E?void 0:E.toString())+"px"),t.style.setProperty("padding-right",(null===(D=S[2])||void 0===D?void 0:D.toString())+"px"),t.style.setProperty("padding-top",(null===(F=S[3])||void 0===F?void 0:F.toString())+"px"),t.style.setProperty("padding-bottom",(null===(Z=S[3])||void 0===Z?void 0:Z.toString())+"px"),t.style.setProperty("box-sizing","border-box"))}return P}function j(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;const i=(0,c.eH)(t),l=(0,c.$4)(t),a=!i||"type"in i?null:new o.A(i),s=null!==l&&void 0!==l&&l.color?new o.A(null===l||void 0===l?void 0:l.color):null,d=a?P((0,n.Ws)(a),e):null,u=s?P((0,n.Ws)(s),e):null;return u?d?d===u?d:e>=S?"light":"dark":u:d}}}]);
//# sourceMappingURL=74088.a9dbd741.chunk.js.map