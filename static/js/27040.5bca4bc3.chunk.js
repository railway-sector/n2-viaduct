"use strict";(self.webpackChunkn2_viaduct=self.webpackChunkn2_viaduct||[]).push([[27040],{27040:(e,n,t)=>{t.r(n),t.d(n,{createMesh:()=>u});var a=t(50076),r=t(25213),i=t(45308),o=t(42294),s=t(14894),l=t(56623),c=t(45136),d=t(95799);function u(e){var n,t;const o=new d.O,u=null!==(n=e.spatialReference)&&void 0!==n?n:e.layerView.view.spatialReference;return o.externalSources.add({extent:null!==(t=e.extent)&&void 0!==t?t:f(e,u),source:{type:"loadable",load:n=>async function(e,n){let{layerView:t,nodeIndex:r,featureIndex:o}=n;const s=t.getNodeComponentHandle(r);if(null===s||void 0===s||!s.intersectionGeometry)throw new a.A("i3s-layer-view-geometry-missing","Cannot load mesh because scene layer view data is no longer available.");const d={indices:null,data:null,stride:0,startIndex:0,endIndex:0};s.intersectionGeometry.getComponentPositions(o,d);const{indices:u,data:f,stride:w,startIndex:p,endIndex:v}=d,x=new Float64Array(3*(v-p));let y=0;for(let a=p;a<v;a+=3){const e=w*u[a],n=w*u[a+1],t=w*u[a+2];x[y++]=f[e],x[y++]=f[e+1],x[y++]=f[e+2],x[y++]=f[n],x[y++]=f[n+1],x[y++]=f[n+2],x[y++]=f[t],x[y++]=f[t+1],x[y++]=f[t+2]}const m=s.transform;(0,c.b)(x,x,m.rotationScale),(0,c.a)(x,x,m.position),(0,i.projectBuffer)(x,t.view.renderSpatialReference,0,x,e.spatialReference,0),e.vertexAttributes=new l.H({position:x})}(n,e)}}),new r.default({metadata:o,vertexSpace:new s.A,spatialReference:u})}function f(e,n){let{layerView:t,nodeIndex:a,featureIndex:r}=e;const s=t.getAABB(a,r);if(!s)return null;const l=t.view.spatialReference;return l.equals(n)||(0,i.projectBuffer)(s,l,0,s,n,0),(0,o.w1)(s,n)}}}]);
//# sourceMappingURL=27040.5bca4bc3.chunk.js.map